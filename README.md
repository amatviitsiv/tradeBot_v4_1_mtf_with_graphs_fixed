# Futures Trend Breakout Bot (Binance USDT-M, HTF + MTF)

–≠—Ç–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ñ—å—é—á–µ—Ä—Å–Ω—ã–π –±–æ—Ç –¥–ª—è **Binance USDT-M**, –≤–∫–ª—é—á–∞—é—â–∏–π:

- –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç-–¥–≤–∏–∂–æ–∫, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–π –ª–æ–≥–∏–∫–æ–π —Å live-—Ç—Ä–µ–π–¥–∏–Ω–≥–æ–º,
- –º—É–ª—å—Ç–∏-—Ç–∞–π–º—Ñ—Ä–µ–π–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é **HTF (H1) —Ç—Ä–µ–Ω–¥ + MTF (M15) breakout**,
- –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è–º–∏,
- –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫—Ç–∏–≤–æ–≤: BTC, ETH, SOL, BNB, AVAX.

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

### ‚úî –¢–æ–ª—å–∫–æ —Ñ—å—é—á–µ—Ä—Å—ã USDT-M
Spot-–ª–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞ ‚Äî –±–æ—Ç –Ω–∞ 100% —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ Binance USDT-M Futures.

### ‚úî Multi-asset —Ä–µ–∂–∏–º
–¢–æ—Ä–≥–æ–≤–ª—è –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –º–æ–Ω–µ—Ç–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
`BTCUSDT, ETHUSDT, SOLUSDT, BNBUSDT, AVAXUSDT`

### ‚úî –ü–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (`strategies/`)
–í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ `config.py`:

- `ema_macd_trend` ‚Äî —Å—Ç–∞—Ä–∞—è EMA + MACD —Å—Ç—Ä–∞—Ç–µ–≥–∏—è  
- `htf_breakout` ‚Äî —Ç—Ä–µ–Ω–¥–æ–≤—ã–π breakout –Ω–∞ H1  
- `mtf_breakout` ‚Äî **–æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: H1-—Ç—Ä–µ–Ω–¥, –≤—Ö–æ–¥—ã –Ω–∞ M15

### ‚úî –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
- —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É: `RISK_PER_TRADE`
- –ø–ª–µ—á–æ: `FUTURES_LEVERAGE_DEFAULT`
- –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π SL –ø–æ ATR
- TP1 + —á–∞—Å—Ç–∏—á–Ω—ã–π –≤—ã—Ö–æ–¥
- –ø–µ—Ä–µ–≤–æ–¥ –≤ –±–µ–∑—É–±—ã—Ç–æ–∫
- —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø –ø–æ ATR

### ‚úî –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π backtester (`backtest/backtester_full.py`)
- –æ–¥–∏–Ω –≤ –æ–¥–∏–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª–æ–≥–∏–∫–æ–π –±—É–¥—É—â–µ–π –∂–∏–≤–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏  
- —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏  
- —Å—á–∏—Ç–∞–µ—Ç equity, ROI, MaxDD, PNL  

### ‚úî –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
–ï—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è H1 –∏ M15 –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ —á–µ—Ä–µ–∑ Binance API.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ config.py                 # –ì–ª–∞–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ broker_base.py            # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±—Ä–æ–∫–µ—Ä
‚îú‚îÄ‚îÄ broker_futures.py         # –ö–∞—Ä–∫–∞—Å Binance Futures –±—Ä–æ–∫–µ—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ strategies/
‚îÇ   ‚îú‚îÄ‚îÄ base.py               # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BaseStrategy
‚îÇ   ‚îú‚îÄ‚îÄ ema_macd.py
‚îÇ   ‚îú‚îÄ‚îÄ htf_breakout.py
‚îÇ   ‚îî‚îÄ‚îÄ mtf_breakout.py       # H1 —Ç—Ä–µ–Ω–¥ + M15 breakout
‚îÇ
‚îú‚îÄ‚îÄ backtest/
‚îÇ   ‚îú‚îÄ‚îÄ backtester_full.py    # –≥–ª–∞–≤–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç-–¥–≤–∏–∂–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ run_backtest.py       # H1-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ run_backtest_mtf.py   # MTF-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py
‚îÇ   ‚îú‚îÄ‚îÄ download_klines.py
‚îÇ   ‚îî‚îÄ‚îÄ download_klines_15m.py
‚îÇ
‚îú‚îÄ‚îÄ indicators.py             # EMA, RSI, ATR, ADX, SMA...
‚îú‚îÄ‚îÄ position.py               # –∫–ª–∞—Å—Å PositionState
‚îú‚îÄ‚îÄ risk.py                   # –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç —Ä–∏—Å–∫–∞
‚îî‚îÄ‚îÄ utils.py / telegram_notify.py
```

---

## ‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (`config.py`)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏

```python
REAL_TRADING = False         # True ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è, False ‚Äî paper/backtest
API_KEY = "..."
API_SECRET = "..."
```

### –°–∏–º–≤–æ–ª—ã –∏ –ø–ª–µ—á–æ

```python
FUTURES_SYMBOLS = ["BTCUSDT", "ETHUSDT", "SOLUSDT", "BNBUSDT", "AVAXUSDT"]
FUTURES_LEVERAGE_DEFAULT = 5
```

### –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç

```python
INITIAL_BALANCE_USDT = 5000
RISK_PER_TRADE = 0.01        # —Ä–∏—Å–∫ 1% –Ω–∞ —Å–¥–µ–ª–∫—É
MAX_OPEN_POSITIONS = 3
```

### ATR SL/TP/Trailing

```python
ATR_PERIOD = 14
ATR_SL_MULT = 4.0
ATR_TP_MULT_1 = 8.0
ATR_TS_MULT = 4.0
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ ‚Üí SL = ATR * SL_MULT  
2. –î–æ—Å—Ç–∏–≥–∞–µ–º TP1 ‚Üí —á–∞—Å—Ç–∏—á–Ω—ã–π –≤—ã—Ö–æ–¥ + –ø–µ—Ä–µ–≤–æ–¥ –≤ –±–µ–∑—É–±—ã—Ç–æ–∫  
3. –î–∞–ª–µ–µ –≤–∫–ª—é—á–µ–Ω —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø –ø–æ ATR  
4. –ü—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ ‚Äî –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

---

## üìà Breakout-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```python
BREAKOUT_ADX_MIN = 20.0
BREAKOUT_LOOKBACK = 20
BREAKOUT_BUFFER_PCT = 0.001
BREAKOUT_VOLUME_MULT = 1.5
```

### MTF (H1 ‚Üí M15)

```python
MTF_LTF_LOOKBACK = 60

MTF_RSI_LONG_MIN = 50
MTF_RSI_LONG_MAX = 85
MTF_RSI_SHORT_MIN = 15
MTF_RSI_SHORT_MAX = 55

LTF_ATR_MIN_PCT = 0.0002
```

---

## üî• –°—Ç—Ä–∞—Ç–µ–≥–∏–∏

### HTF Breakout (H1)

–§–∞–π–ª: `strategies/htf_breakout.py`

- —Ç—Ä–µ–Ω–¥ —á–µ—Ä–µ–∑ EMA20/50/200 + ADX/ATR/RSI  
- —Ñ–∏–ª—å—Ç—Ä —Ñ–ª–µ—Ç–æ–≤ –∏ –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏  
- –≤—Ö–æ–¥ –ø–æ –ø—Ä–æ–±–æ—é High/Low –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∑–∞ `BREAKOUT_LOOKBACK` H1-–±–∞—Ä–æ–≤  
- —Ç–æ—Ä–≥–æ–≤–ª—è —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–æ—Ä–æ–Ω—É —Ç—Ä–µ–Ω–¥–∞ HTF  

### MTF Breakout (H1 —Ç—Ä–µ–Ω–¥ + M15 –≤—Ö–æ–¥—ã)

–§–∞–π–ª: `strategies/mtf_breakout.py`  
–ë—ç–∫—Ç–µ—Å—Ç: `backtest/run_backtest_mtf.py`

1. –ù–∞ H1 —Å—á–∏—Ç–∞–µ–º —Ç—Ä–µ–Ω–¥ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã ‚Äî EMA/ATR/ADX/RSI/SMA  
2. –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –∏—Ö –Ω–∞ M15 (–ø—Ä–µ—Ñ–∏–∫—Å `HTF_`)  
3. –ù–∞ M15:
   - –¥–∏–∞–ø–∞–∑–æ–Ω High/Low –∑–∞ `MTF_LTF_LOOKBACK` –±–∞—Ä–æ–≤
   - –æ–±—ä—ë–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
   - ATR-—Ñ–∏–ª—å—Ç—Ä –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
   - RSI-—Ñ–∏–ª—å—Ç—Ä
4. –í—Ö–æ–¥:
   - `buy`, –µ—Å–ª–∏ HTF bull + –ø—Ä–æ–±–æ–π –≤–≤–µ—Ä—Ö
   - `sell`, –µ—Å–ª–∏ HTF bear + –ø—Ä–æ–±–æ–π –≤–Ω–∏–∑

---

## üß™ –ë—ç–∫—Ç–µ—Å—Ç

### HTF (H1)
```bash
python backtest/run_backtest.py
```

### MTF (H1 + M15)
```bash
python backtest/run_backtest_mtf.py
```

–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–ø–æ —Ç–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º –∑–∞ ~180 –¥–Ω–µ–π):

- HTF: ~20‚Äì25% ROI, DD ~12%  
- MTF: ~40+% ROI, DD ~20‚Äì24%  
- BTC MTF: ~12% ROI, DD ~6%  

---

## üöÄ Live Trading (–ø–ª–∞–Ω—ã)

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ/testnet, –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å:

1. `broker_futures.py`: —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞, SL/TP, –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π  
2. WebSocket-—Å—Ç—Ä–∏–º–∏–Ω–≥ —Å–≤–µ—á–µ–π (M15 + –∞–≥—Ä–µ–≥–∞—Ü–∏—è –≤ H1)  
3. Runtime-–ø–µ—Ç–ª—é —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–¥–µ–ª–æ–∫  
4. –†–µ–∂–∏–º—ã: paper / testnet / mainnet  

---

## ‚ö† –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

- –ù–∏–∫–∞–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏–±—ã–ª—å –≤ –±—É–¥—É—â–µ–º.  
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
  - —Ç–µ—Å—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–∏–æ–¥–∞—Ö,
  - —Ç–µ—Å—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö,
  - testnet –ø–µ—Ä–µ–¥ real.  
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –¥–µ–Ω—å–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≥–æ—Ç–æ–≤ –ø–æ—Ç–µ—Ä—è—Ç—å.

---

## üß± –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (volatility-based)  
- —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–æ—Ä–≥–æ–≤—ã–º —Å–µ—Å—Å–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –∞–∑–∏–∞—Ç—Å–∫—É—é)  
- –ª–æ–≥ —Å–¥–µ–ª–æ–∫ –≤ CSV/SQLite  
- –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (grid search –¥–ª—è MTF)  
- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (SuperTrend, KAMA –∏ —Ç.–¥.)  

–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤—É—é –ø—Ä–∏–±—ã–ª—å –≤ –±—ç–∫—Ç–µ—Å—Ç–µ –∏ –∏–º–µ–µ—Ç
–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è.
